/**
 * Adds an item to the specified gallery.
 *
 * @param gallery_id The gallery id
 * @param item_id The item id
 * @return boolean
*/function addGalleryItem(e,t){if(typeof e=="undefined"||typeof t=="undefined")return!1;$.get("/admin/plugin/li3b_gallery/items/meta/"+t+".json",function(n){console.dir(n.data);var r=n.data.title;r.length>27&&(r=r.substr(0,27)+"...");var i="";i+='<div class="gallery_item" id="gallery_item_'+t+'">';i+='<div class="gallery_item_image_wrapper">';i+='<div class="gallery_item_image">';i+='<img id="image_for_'+t+'" src="/li3b_gallery/images/175/175/'+n.data.source+'?crop=true" alt="'+n.data.title+'" />';i+="</div>";i+="</div>";i+='<div class="gallery_item_info">';i+='<h3 id="title_for_'+t+'">'+r+"</h3>";i+="</div>";i+='<div class="gallery_item_actions">';i+='<a href="#" onClick="removeItemFromGallery(\''+t+"', '"+e+'\'); return false;" class="remove" rel="'+t+'" title="Remove from this gallery">Remove</a>';i+='<a href="#" onClick="editGalleryItem(\''+t+'\'); return false;" class="edit" rel="'+t+'" title="Edit item information">Edit</a>';i+='<a href="#" onClick="setGalleryCover(\''+e+"', '"+t+'\'); return false;" class="cover" rel="'+t+'" title="Set this image as the gallery cover image.">Cover Image</a>';i+="</div>";i+="</div>";$(i).hide().appendTo(".gallery_items").fadeIn("medium");return!0})}function removeItemFromGallery(e,t){if(typeof e=="undefined")return!1;$.get("/admin/plugin/li3b_gallery/items/association/remove/"+e+"/"+t+".json",function(t){if(t.success==1){$("#gallery_item_"+e).fadeOut("medium");return!0}return!1})}function editGalleryItem(e){$("#edit_item_id").val(e);$.get("/admin/plugin/li3b_gallery/items/meta/"+e+".json",function(t){$("#edit_item_form #Title").val(t.data.title);$("#edit_item_form #Description").val(t.data.description);$("#edit_item_form #Published").attr("checked",t.data.published);var n=new Date(t.data.modified*1e3),r=Date.parse(n.toDateString()).toString("MMMM d, yyyy");$("#edit_gallery_item_last_update").text(r);$("#edit_gallery_item_thumbnail").html('<img src="'+$("#gallery_item_"+e).find(".gallery_item_image img").attr("src")+'" alt="'+$("#image_for_"+e).attr("alt")+'" />')});$("#edit_gallery_item_modal").modal({height:400,width:450,modal:!0});return!1}function setGalleryCover(e,t){if(typeof t=="undefined")return!1;$.get("/admin/plugin/li3b_gallery/galleries/set_cover_image/"+e+"/"+t+".json",function(e){if(e.success==1){$(".cover").addClass("icon-star-empty").removeClass("icon-star");$(".cover","#gallery_item_"+t).removeClass("icon-star-empty").addClass("icon-star");return!0}return!1})}function addUnassociatedItem(e,t){if(typeof e=="undefined"||typeof t=="undefined")return!1;$.get("/admin/plugin/li3b_gallery/items/association/add/"+e+"/"+t+".json",function(n){if(n.success==1){addGalleryItem(t,e);$("#gallery_item_"+e).fadeOut("medium");return!0}return!1})}function enableSorting(e){if(typeof e=="undefined"||e==0){e=$(".gallery_items").attr("id");e=e.substr(8)}$(".gallery_items").sortable({stop:function(t,n){var r=new Array;$(".gallery_items").children().each(function(){r.push($(this).attr("id").substr(13))});$.ajax({type:"POST",url:"/admin/plugin/li3b_gallery/items/order/"+e+".json",data:{order:r},success:function(e){}})}})}function enableAgileUploader(e){$("#agile_uploader").agileUploader({flashSrc:"/li3b_gallery/swf/agile-uploader.swf",flashWidth:66,removeIcon:"/li3b_gallery/img/trash-icon.png",genericFileIcon:"/li3b_gallery/img/file-icon.png",submitRedirect:"/admin/plugin/li3b_gallery/items/manage/"+e,formId:"upload-new-items",flashVars:{form_action:"/admin/plugin/li3b_gallery/items/create",file_limit:20,file_filter:"*.jpg;*.jpeg;*.gif;*.png;*.JPG;*.JPEG;*.GIF;*.PNG",resize:"jpg,jpeg,gif",force_preview_thumbnail:"true",firebug:"false",button_up:"/li3b_gallery/img/add-file-normal.png",button_over:"/li3b_gallery/img/add-file-over.png",button_down:"/li3b_gallery/img/add-file-over.png"}})}$(document).ready(function(){$("#edit_item_form").submit(function(){$.ajax({type:"POST",url:"/admin/plugin/li3b_gallery/items/meta/"+$("#edit_item_id").val()+".json",data:$(this).serialize(),success:function(e){$("#title_for_"+e.data._id).text(e.data.title);$("#edit_gallery_item_modal").modal("hide");window.location.reload()}});return!1})});